<!DOCTYPE html>
<html lang="en">
<head>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-58WNFTH58D"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-58WNFTH58D');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn how to solve Course Schedule II using Graph Traversal. medium difficulty. Time: O(V + E), Space: O(V + E).">
    <link rel="canonical" href="https://leeteye.com/problems/graphs/course-schedule-ii.html">

    <!-- Open Graph -->
    <meta property="og:title" content="Course Schedule II Solution | Graph Traversal | LeetEye">
    <meta property="og:description" content="Learn how to solve Course Schedule II using Graph Traversal. medium difficulty. Time: O(V + E), Space: O(V + E).">
    <meta property="og:image" content="https://leeteye.com/assets/og-image.png">
    <meta property="og:url" content="https://leeteye.com/problems/graphs/course-schedule-ii.html">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="LeetEye">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Course Schedule II Solution | Graph Traversal | LeetEye">
    <meta name="twitter:description" content="Learn how to solve Course Schedule II using Graph Traversal. medium difficulty. Time: O(V + E), Space: O(V + E).">
    <meta name="twitter:image" content="https://leeteye.com/assets/og-image.png">

    <title>Course Schedule II Solution | Graphs | LeetEye</title>

    <link rel="icon" type="image/png" href="../../../assets/logo.png">
    <link rel="apple-touch-icon" href="../../../assets/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/pseo.css">

    <!-- Schema.org HowTo -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Solve Course Schedule II",
        "description": "Topological sort: DFS post-order (reversed) or Kahn&#039;s (process 0 in-degree first). If can&#039;t include all nodes, cycle exists, return empty.",
        "totalTime": "PT5M",
        "tool": {
            "@type": "HowToTool",
            "name": "Python"
        },
        "step": [
            {
            "@type": "HowToStep",
            "name": "Step 1",
            "text": "A topological order of a DAG is:",
            "position": 1
        },
{
            "@type": "HowToStep",
            "name": "Step 2",
            "text": "DFS topological sort uses:",
            "position": 2
        },
{
            "@type": "HowToStep",
            "name": "Step 3",
            "text": "Kahn's algorithm processes nodes in order of:",
            "position": 3
        },
{
            "@type": "HowToStep",
            "name": "Step 4",
            "text": "If there's a cycle:",
            "position": 4
        },
{
            "@type": "HowToStep",
            "name": "Step 5",
            "text": "For prerequisites [[1,0],[2,0]], valid orderings include:",
            "position": 5
        }
        ],
        "author": {
            "@type": "Organization",
            "name": "LeetEye",
            "url": "https://leeteye.com"
        }
    }
    </script>

    <!-- Schema.org FAQPage -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is the time complexity of Course Schedule II?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The optimal solution has O(V + E) time complexity and O(V + E) space complexity."
                }
            },
            {
                "@type": "Question",
                "name": "What pattern does Course Schedule II use?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Course Schedule II uses the Graph Traversal pattern. Topological sort: order nodes so all edges go forward."
                }
            }
        ]
    }
    </script>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/" class="back-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                LeetEye
            </a>
            <img src="../../../assets/logo.png" alt="LeetEye" class="logo-small">
        </div>
    </header>

    <nav class="breadcrumb" aria-label="Breadcrumb">
        <ol>
            <li><a href="/">Home</a></li>
            <li><a href="/patterns/">Patterns</a></li>
            <li><a href="/patterns/graphs/">Graphs</a></li>
            <li aria-current="page">Course Schedule II</li>
        </ol>
    </nav>

    <main class="content">
        <article class="problem-article">
            <header class="problem-header">
                <div class="problem-meta">
                    <span class="difficulty difficulty-medium">Medium</span>
                    <a href="/patterns/graphs/" class="pattern-badge">Graph Traversal</a>
                    <span class="time-estimate">~5 min</span>
                </div>
                <h1>Course Schedule II</h1>
                <p class="problem-tags">
                    <span class="tag">graphs</span>
<span class="tag">course-schedule-ii</span>
                </p>
            </header>

            <section class="problem-statement">
                <h2>Problem</h2>
                <div class="statement-text">
                    There are a total of <code>numCourses</code> courses you have to take, labeled from <code>0</code> to <code>numCourses - 1</code>. You are given an array <code>prerequisites</code> where <code>prerequisites[i] = [ai, bi]</code> indicates that you must take course <code>bi</code> first if you want to take course <code>ai</code>.<br><br>Return the ordering of courses you should take to finish all courses. If there are many valid answers, return any of them. If it is impossible to finish all courses, return an empty array.
                </div>

                <div class="examples">
                    <h3>Examples</h3>
                    
        <div class="example">
            <div class="example-label">Example 1</div>
            <div class="example-input"><strong>Input:</strong> numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]</div>
            <div class="example-output"><strong>Output:</strong> [0,2,1,3] or [0,1,2,3]</div>
            
        </div>
    

        <div class="example">
            <div class="example-label">Example 2</div>
            <div class="example-input"><strong>Input:</strong> numCourses = 1, prerequisites = []</div>
            <div class="example-output"><strong>Output:</strong> [0]</div>
            
        </div>
    
                </div>
            </section>

            <section class="key-insight">
                <div class="key-insight-title">Key Insight</div>
                <p>Topological sort: order nodes so all edges go forward.</p>
                <p class="one-liner"><em>Topological sort: DFS post-order (reversed) or Kahn&#039;s (process 0 in-degree first). If can&#039;t include all nodes, cycle exists, return empty.</em></p>
            </section>

            <section class="approach">
                <h2>How to Approach This Problem</h2>

                <div class="trigger-words">
                    <strong>Pattern Recognition:</strong> When you see keywords like
                    <span class="triggers"><span class="trigger-tag">course schedule ii</span> <span class="trigger-tag">graphs</span></span>,
                    think <strong>Graph Traversal</strong>.
                </div>

                <h3>Step-by-Step Reasoning</h3>
                <div class="reasoning-steps">
                    
        <div class="reasoning-step">
            <div class="step-question">
                <span class="step-number">1</span>
                A topological order of a DAG is:
            </div>
            <div class="step-answer">
                <strong>Answer:</strong> Order where all prerequisites come before dependents
            </div>
            <div class="step-explanation">
                If A must come before B, A appears earlier in topological order.
            </div>
        </div>

        <div class="reasoning-step">
            <div class="step-question">
                <span class="step-number">2</span>
                DFS topological sort uses:
            </div>
            <div class="step-answer">
                <strong>Answer:</strong> Post-order traversal (then reverse)
            </div>
            <div class="step-explanation">
                We add nodes to result AFTER processing all descendants. Reversing gives correct order.
            </div>
        </div>

        <div class="reasoning-step">
            <div class="step-question">
                <span class="step-number">3</span>
                Kahn's algorithm processes nodes in order of:
            </div>
            <div class="step-answer">
                <strong>Answer:</strong> In-degree (starting with 0 in-degree)
            </div>
            <div class="step-explanation">
                Nodes with no prerequisites can be taken first. Remove them, update in-degrees, repeat.
            </div>
        </div>

        <div class="reasoning-step">
            <div class="step-question">
                <span class="step-number">4</span>
                If there's a cycle:
            </div>
            <div class="step-answer">
                <strong>Answer:</strong> We can&#039;t produce any valid ordering
            </div>
            <div class="step-explanation">
                Cyclic dependencies have no valid ordering. Return empty.
            </div>
        </div>

        <div class="reasoning-step">
            <div class="step-question">
                <span class="step-number">5</span>
                For prerequisites [[1,0],[2,0]], valid orderings include:
            </div>
            <div class="step-answer">
                <strong>Answer:</strong> Both [0,1,2] and [0,2,1]
            </div>
            <div class="step-explanation">
                0 must come first, but 1 and 2 can be in either order.
            </div>
        </div>
                </div>
            </section>

            <section class="solution">
                <h2>Solution</h2>
                <pre><code class="language-python"><span class="code-keyword">def</span> findOrder(numCourses: <span class="code-func">int</span>, prerequisites: List[List[<span class="code-func">int</span>]]) -&gt; List[<span class="code-func">int</span>]:
    graph = {i: [] <span class="code-keyword">for</span> i <span class="code-keyword">in</span> <span class="code-func">range</span>(numCourses)}
    <span class="code-keyword">for</span> course, prereq <span class="code-keyword">in</span> prerequisites:
        graph[course].<span class="code-func">append</span>(prereq)
    
    result = []
    state = [<span class="code-number">0</span>] * numCourses  <span class="code-comment"># 0=unvisited, 1=visiting, 2=visited</span>
    
    <span class="code-keyword">def</span> dfs(course):
        <span class="code-keyword">if</span> state[course] == <span class="code-number">1</span>:  <span class="code-comment"># Cycle</span>
            <span class="code-keyword">return</span> <span class="code-keyword">False</span>
        <span class="code-keyword">if</span> state[course] == <span class="code-number">2</span>:  <span class="code-comment"># Already added</span>
            <span class="code-keyword">return</span> <span class="code-keyword">True</span>
        
        state[course] = <span class="code-number">1</span>
        
        <span class="code-keyword">for</span> prereq <span class="code-keyword">in</span> graph[course]:
            <span class="code-keyword">if</span> <span class="code-keyword">not</span> dfs(prereq):
                <span class="code-keyword">return</span> <span class="code-keyword">False</span>
        
        state[course] = <span class="code-number">2</span>
        result.<span class="code-func">append</span>(course)  <span class="code-comment"># Post-order</span>
        <span class="code-keyword">return</span> <span class="code-keyword">True</span>
    
    <span class="code-keyword">for</span> course <span class="code-keyword">in</span> <span class="code-func">range</span>(numCourses):
        <span class="code-keyword">if</span> <span class="code-keyword">not</span> dfs(course):
            <span class="code-keyword">return</span> []
    
    <span class="code-keyword">return</span> result  <span class="code-comment"># Already in correct order (prereqs first)</span></code></pre>

                <div class="complexity">
                    <h3>Complexity Analysis</h3>
                    <table class="complexity-table">
                        <tr>
                            <th>Time</th>
                            <td><code>O(V + E)</code></td>
                        </tr>
                        <tr>
                            <th>Space</th>
                            <td><code>O(V + E)</code></td>
                        </tr>
                    </table>
                </div>
            </section>

            <!-- Primary CTA -->
            <section class="cta-box">
                <h2>Master This Pattern</h2>
                <p>Build intuition with interactive MCQs. Practice Graph Traversal problems in the LeetEye app.</p>
                <a href="https://apps.apple.com/us/app/leeteye/id6756695234?utm_source=website&utm_medium=problem&utm_campaign=course-schedule-ii" class="cta-button cta-primary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                    </svg>
                    Download LeetEye Free
                </a>
            </section>

            <!-- Related Problems -->
            <aside class="related-problems">
                <h3>More Graphs Problems</h3>
                <ul class="problem-list">
                    
        <li>
            <a href="/problems/graphs/number-of-islands.html">
                <span class="problem-card-title">Number of Islands</span>
                <span class="difficulty difficulty-medium">medium</span>
            </a>
        </li>
    

        <li>
            <a href="/problems/graphs/clone-graph.html">
                <span class="problem-card-title">Clone Graph</span>
                <span class="difficulty difficulty-medium">medium</span>
            </a>
        </li>
    

        <li>
            <a href="/problems/graphs/pacific-atlantic-water-flow.html">
                <span class="problem-card-title">Pacific Atlantic Water Flow</span>
                <span class="difficulty difficulty-medium">medium</span>
            </a>
        </li>
    

        <li>
            <a href="/problems/graphs/course-schedule.html">
                <span class="problem-card-title">Course Schedule</span>
                <span class="difficulty difficulty-medium">medium</span>
            </a>
        </li>
    

        <li>
            <a href="/problems/graphs/rotting-oranges.html">
                <span class="problem-card-title">Rotting Oranges</span>
                <span class="difficulty difficulty-medium">medium</span>
            </a>
        </li>
    
                </ul>
                <a href="/patterns/graphs/" class="see-all-link">See all Graphs problems &rarr;</a>
            </aside>
        </article>
    </main>

    <!-- Sticky Mobile CTA -->
    <div class="sticky-cta">
        <a href="https://apps.apple.com/us/app/leeteye/id6756695234?utm_source=website&utm_medium=sticky&utm_campaign=course-schedule-ii" class="cta-button">
            Practice in LeetEye
        </a>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 LeetEye. Pattern recognition for coding interviews.</p>
            <nav class="footer-nav">
                <a href="/patterns/">All Patterns</a>
                <a href="/problems/">All Problems</a>
                <a href="/cheatsheets/">Cheat Sheets</a>
            </nav>
        </div>
    </footer>
</body>
</html>
